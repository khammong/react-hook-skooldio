{"ast":null,"code":"var _jsxFileName = \"/Users/lalida/Project/Learning/skooldio-react-hooks-ecommerce/src/contexts/cart.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n\n  const [cartItems, setCartItems] = useState([]);\n  useEffect(() => {\n    const cartItemsString = window.localStorage.getItem('cartItems');\n    const cart = cartItemsString ? JSON.parse(cartItemsString) : [];\n    setCartItems(cart);\n  }, []);\n\n  const addCartItem = (product, quantity) => {\n    const matchingCartItem = cartItems.find(cartItem => cartItem.product.id === product.id);\n\n    if (matchingCartItem) {\n      matchingCartItem.quantity += quantity;\n    } else {\n      cartItems.push({\n        product,\n        quantity\n      });\n    }\n\n    setCartItems([...cartItems]);\n    window.localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  };\n\n  const removeCartItem = productId => {\n    const newCartItems = cartItems.filter(cartItem => cartItem.product.id !== productId);\n    setCartItems(newCartItems);\n    window.localStorage.setItem('cartItems', JSON.stringify(newCartItems));\n  };\n\n  const updateQuantity = (productId, quantity) => {\n    const matchingCartItem = cartItems.find(cartItem => cartItem.product.id === productId);\n\n    if (!matchingCartItem) {\n      return;\n    }\n\n    matchingCartItem.quantity = quantity;\n    setCartItems([...cartItems]);\n    window.localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  };\n\n  const validForCheckout = cartItems.every(cartItem => cartItem.quantity % 1 === 0 && cartItem.quantity > 0);\n\n  const checkout = () => {\n    setCartItems([]);\n    window.localStorage.setItem('cartItems', JSON.stringify([]));\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addCartItem,\n      removeCartItem,\n      updateQuantity,\n      validForCheckout,\n      checkout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 12\n  }, this);\n};\n\n_s(CartProvider, \"yMyLm0mTOdUD4xRL2vnEhQFbjeY=\");\n\n_c = CartProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["/Users/lalida/Project/Learning/skooldio-react-hooks-ecommerce/src/contexts/cart.js"],"names":["createContext","useState","useEffect","CartContext","CartProvider","children","cartItems","setCartItems","cartItemsString","window","localStorage","getItem","cart","JSON","parse","addCartItem","product","quantity","matchingCartItem","find","cartItem","id","push","setItem","stringify","removeCartItem","productId","newCartItems","filter","updateQuantity","validForCheckout","every","checkout"],"mappings":"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","sourcesContent":["import {createContext, useState, useEffect} from 'react'\n\nexport const CartContext = createContext()\nexport const CartProvider = ({children}) => {\n    const [cartItems, setCartItems] = useState([])\n    useEffect(() => {\n      const cartItemsString =  window.localStorage.getItem('cartItems')\n      const cart = cartItemsString ? JSON.parse(cartItemsString) : []\n      setCartItems(cart)\n    }, [])\n    const addCartItem = (product, quantity) => {\n        const matchingCartItem = cartItems.find((cartItem) => cartItem.product.id === product.id)\n        if(matchingCartItem) {\n            matchingCartItem.quantity += quantity\n        }\n        else {\n            cartItems.push({product, quantity})\n        }\n\n        setCartItems([...cartItems])\n        window.localStorage.setItem('cartItems', JSON.stringify(cartItems))\n    }\n    const removeCartItem = (productId) => {\n        const newCartItems = cartItems.filter((cartItem) => cartItem.product.id !== productId)\n        setCartItems(newCartItems)\n        window.localStorage.setItem('cartItems', JSON.stringify(newCartItems))\n    }\n\n    const updateQuantity = (productId, quantity) => {\n        const matchingCartItem = cartItems.find((cartItem) => cartItem.product.id === productId)\n        if(!matchingCartItem) {\n            return\n        }\n        matchingCartItem.quantity = quantity\n        setCartItems([...cartItems])\n        window.localStorage.setItem('cartItems', JSON.stringify(cartItems))\n    }\n    const validForCheckout = cartItems.every(\n        (cartItem) => cartItem.quantity %1 === 0 && cartItem.quantity > 0)\n    const checkout = () => {\n        setCartItems([])\n        window.localStorage.setItem('cartItems', JSON.stringify([]))\n    }\n    return <CartContext.Provider value={{\n        cartItems, addCartItem, removeCartItem, updateQuantity, validForCheckout, checkout\n    }}>{children}</CartContext.Provider>\n}"]},"metadata":{},"sourceType":"module"}