{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nexport const useCart = () => {\n  _s();\n\n  const [cartItems, setCartItems] = useState([]);\n  useEffect(() => {\n    const cartItemsString = window.localStorage.getItem('cartItems');\n    const cart = cartItemsString ? JSON.parse(cartItemsString) : [];\n    setCartItems(cart);\n  }, []);\n\n  const addCartItem = (product, quantity) => {\n    const matchingCartItem = cartItems.find(cartItem => cartItem.product.id === product.id);\n\n    if (matchingCartItem) {\n      matchingCartItem.quantity += quantity;\n    } else {\n      cartItems.push({\n        product,\n        quantity\n      });\n    }\n\n    setCartItems([...cartItems]);\n    window.localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  };\n\n  const removeCartItem = productId => {\n    const newCartItems = cartItems.filter(cartItem => cartItem.product.id !== productId);\n    setCartItems(newCartItems);\n    window.localStorage.setItem('cartItems', JSON.stringify(newCartItems));\n  };\n\n  const updateQuantity = (productId, quantity) => {\n    const matchingCartItem = cartItems.find(cartItem => cartItem.product.id === productId);\n\n    if (!matchingCartItem) {\n      return;\n    }\n\n    matchingCartItem.quantity = quantity;\n    setCartItems([...cartItems]);\n    window.localStorage.setItem('cartItems', JSON.stringify(cartItems));\n  };\n\n  return {\n    cartItems,\n    addCartItem,\n    removeCartItem,\n    updateQuantity\n  };\n};\n\n_s(useCart, \"yMyLm0mTOdUD4xRL2vnEhQFbjeY=\");\n\nexport default useCart;","map":{"version":3,"sources":["/Users/lalida/Project/Learning/skooldio-react-hooks-ecommerce/src/hooks/useCart.js"],"names":["useState","useEffect","useCart","cartItems","setCartItems","cartItemsString","window","localStorage","getItem","cart","JSON","parse","addCartItem","product","quantity","matchingCartItem","find","cartItem","id","push","setItem","stringify","removeCartItem","productId","newCartItems","filter","updateQuantity"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BJ,QAAQ,CAAC,EAAD,CAA1C;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMI,eAAe,GAAIC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAzB;AACA,UAAMC,IAAI,GAAGJ,eAAe,GAAGK,IAAI,CAACC,KAAL,CAAWN,eAAX,CAAH,GAAiC,EAA7D;AACAD,IAAAA,YAAY,CAACK,IAAD,CAAZ;AACD,GAJQ,EAIN,EAJM,CAAT;;AAKA,QAAMG,WAAW,GAAG,CAACC,OAAD,EAAUC,QAAV,KAAuB;AACvC,UAAMC,gBAAgB,GAAGZ,SAAS,CAACa,IAAV,CAAgBC,QAAD,IAAcA,QAAQ,CAACJ,OAAT,CAAiBK,EAAjB,KAAwBL,OAAO,CAACK,EAA7D,CAAzB;;AACA,QAAGH,gBAAH,EAAqB;AACjBA,MAAAA,gBAAgB,CAACD,QAAjB,IAA6BA,QAA7B;AACH,KAFD,MAGK;AACDX,MAAAA,SAAS,CAACgB,IAAV,CAAe;AAACN,QAAAA,OAAD;AAAUC,QAAAA;AAAV,OAAf;AACH;;AAEDV,IAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,CAAD,CAAZ;AACAG,IAAAA,MAAM,CAACC,YAAP,CAAoBa,OAApB,CAA4B,WAA5B,EAAyCV,IAAI,CAACW,SAAL,CAAelB,SAAf,CAAzC;AACH,GAXD;;AAYA,QAAMmB,cAAc,GAAIC,SAAD,IAAe;AAClC,UAAMC,YAAY,GAAGrB,SAAS,CAACsB,MAAV,CAAkBR,QAAD,IAAcA,QAAQ,CAACJ,OAAT,CAAiBK,EAAjB,KAAwBK,SAAvD,CAArB;AACAnB,IAAAA,YAAY,CAACoB,YAAD,CAAZ;AACAlB,IAAAA,MAAM,CAACC,YAAP,CAAoBa,OAApB,CAA4B,WAA5B,EAAyCV,IAAI,CAACW,SAAL,CAAeG,YAAf,CAAzC;AACH,GAJD;;AAMA,QAAME,cAAc,GAAG,CAACH,SAAD,EAAYT,QAAZ,KAAyB;AAC5C,UAAMC,gBAAgB,GAAGZ,SAAS,CAACa,IAAV,CAAgBC,QAAD,IAAcA,QAAQ,CAACJ,OAAT,CAAiBK,EAAjB,KAAwBK,SAArD,CAAzB;;AACA,QAAG,CAACR,gBAAJ,EAAsB;AAClB;AACH;;AACDA,IAAAA,gBAAgB,CAACD,QAAjB,GAA4BA,QAA5B;AACAV,IAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,CAAD,CAAZ;AACAG,IAAAA,MAAM,CAACC,YAAP,CAAoBa,OAApB,CAA4B,WAA5B,EAAyCV,IAAI,CAACW,SAAL,CAAelB,SAAf,CAAzC;AACH,GARD;;AAUA,SAAO;AACHA,IAAAA,SADG;AACQS,IAAAA,WADR;AACqBU,IAAAA,cADrB;AACqCI,IAAAA;AADrC,GAAP;AAGH,CAtCM;;GAAMxB,O;;AAwCb,eAAeA,OAAf","sourcesContent":["import { useState, useEffect } from \"react\";\n\nexport const useCart = () => {\n    const [cartItems, setCartItems] = useState([])\n    useEffect(() => {\n      const cartItemsString =  window.localStorage.getItem('cartItems')\n      const cart = cartItemsString ? JSON.parse(cartItemsString) : []\n      setCartItems(cart)\n    }, [])\n    const addCartItem = (product, quantity) => {\n        const matchingCartItem = cartItems.find((cartItem) => cartItem.product.id === product.id)\n        if(matchingCartItem) {\n            matchingCartItem.quantity += quantity\n        }\n        else {\n            cartItems.push({product, quantity})\n        }\n\n        setCartItems([...cartItems])\n        window.localStorage.setItem('cartItems', JSON.stringify(cartItems))\n    }\n    const removeCartItem = (productId) => {\n        const newCartItems = cartItems.filter((cartItem) => cartItem.product.id !== productId)\n        setCartItems(newCartItems)\n        window.localStorage.setItem('cartItems', JSON.stringify(newCartItems))\n    }\n\n    const updateQuantity = (productId, quantity) => {\n        const matchingCartItem = cartItems.find((cartItem) => cartItem.product.id === productId)\n        if(!matchingCartItem) {\n            return\n        }\n        matchingCartItem.quantity = quantity\n        setCartItems([...cartItems])\n        window.localStorage.setItem('cartItems', JSON.stringify(cartItems))\n    }\n\n    return {\n        cartItems, addCartItem, removeCartItem, updateQuantity\n    }\n}\n\nexport default useCart"]},"metadata":{},"sourceType":"module"}